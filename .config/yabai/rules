#!/usr/bin/env sh

if [ "$(yabai -m query --displays | jq length)" -eq 1 ]; then
    yabai -m rule --add app=".*" space=1
else
    ### app
    yabai -m rule --add app="^Emacs$" space=1
    yabai -m rule --add app="^Alacritty$" space=1
    yabai -m rule --add app="^Firefox Developer Edition$" space=6

    yabai -m rule --add app="^Todoist$" space=2
    yabai -m rule --add app="^Notion$" space=2
    yabai -m rule --add app="^NotePlan$" space=2
    yabai -m rule --add app="^Logseq$" space=2
    yabai -m rule --add app="^Roam$" space=2
    yabai -m rule --add app="^Google Chrome$" space=7

    yabai -m rule --add app="^Mail$" space=3
    yabai -m rule --add app="^Newsblur$" space=3
    yabai -m rule --add app="^Reeder$" space=3
    yabai -m rule --add app="^Figma$" space=8
    yabai -m rule --add app="^ClickUp$" space=8

    yabai -m rule --add app="^WeChat$" title="^WeChat" manage=on space=9
    yabai -m rule --add app="^DingTalk$" space=9
    yabai -m rule --add app="^Slack$" space=9

    yabai -m rule --add app="^Keybase$" manage=on space=5
    yabai -m rule --add app="^Discord$" manage=on space=5
    yabai -m rule --add app="^Telegram$" manage=on space=5
    yabai -m rule --add app="^Endel$" manage=on space=10
    yabai -m rule --add app="^NeteaseMusic$" manage=on space=10
fi

### float
yabai -m rule --add app="^Emacs$" title="^ *Minibuf.*\*$" manage=off
yabai -m rule --add app="^WeChat$" title!="^WeChat" manage=off
yabai -m rule --add app="^CleanMyMac.*$" manage=off
yabai -m rule --add app="^System Preferences$" manage=off
yabai -m rule --add app="^Twitterrific$" manage=off
yabai -m rule --add app="^Dash$" manage=off
yabai -m rule --add app="^Slidepad$" manage=off border=off
yabai -m rule --add app="^Sensei$" manage=off
yabai -m rule --add app="^Finder$" title="^/Volumes/" manage=off
yabai -m rule --add app="^Install$" manage=off
yabai -m rule --add app="^Image2icon$" manage=off
yabai -m rule --add app="^Surge$" manage=off
yabai -m rule --add app="^Alfred Preferences$" manage=off
yabai -m rule --add app="^Raycast$" manage=off
yabai -m rule --add app="^Karabiner-Elements$" manage=off
yabai -m rule --add app="^TencentMeeting$" title="腾讯会议" manage=off
yabai -m rule --add app="^iShot$" manage=off
yabai -m rule --add app="^DingTalk$" title="Window" manage=off
yabai -m rule --add app="^Expressions$" manage=off
yabai -m rule --add app="^Digital Colou?r Meter$" sticky=on
# yabai -m rule --add app="^Finder$" manage=off
yabai -m rule --add app="^Google Drive$" manage=off
yabai -m rule --add app="^ToothFairy$" manage=off
yabai -m rule --add app="^Typora$" title="^Preferences$" manage=off
yabai -m rule --add app="^CleanShot X$" layer=above manage=off border=off mouse_follows_focus=off sticky=off
yabai -m rule --add app="^iStat Menus Status$" manage=off border=off mouse_follows_focus=off sticky=off
