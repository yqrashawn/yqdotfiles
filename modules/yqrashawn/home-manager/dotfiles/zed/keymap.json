[
  // ============================================================================
  // GLOBAL KEYBINDINGS
  // ============================================================================
  {
    "use_key_equivalents": true,
    "bindings": {
      // Menu navigation (from Emacs C-j/C-k pattern)
      "ctrl-j": "menu::SelectNext",
      "ctrl-k": "menu::SelectPrevious",
      "ctrl-l": "menu::Confirm",
      "ctrl-s": "vim::Search",

      // Global shortcuts (from Emacs map.el)
      "ctrl-;": "editor::ShowAssist", // Similar to embark-act
      "cmd-k": "pane::CloseActiveItem", // bury-buffer
      "cmd-u": "editor::Revert" // revert-buffer
    }
  },

  // ============================================================================
  // EDITOR KEYBINDINGS (All modes)
  // ============================================================================
  {
    "context": "Editor",
    "use_key_equivalents": true,
    "bindings": {
      // Line movement (from Emacs mwim)
      "ctrl-e": "editor::MoveToEndOfLine",
      "ctrl-a": "editor::MoveToBeginningOfLine",

      // Search (from Emacs C-s)
      "ctrl-s": "buffer_search::Deploy",

      // Yank/paste (from Emacs C-y)
      "ctrl-y": "editor::Paste"
    }
  },

  // ============================================================================
  // VIM NORMAL MODE - SPACE LEADER BINDINGS
  // ============================================================================
  {
    "context": "vim_mode == normal || EmptyPane || SharedScreen",
    "bindings": {
      // ========== CORE COMMANDS ==========
      "space space": "command_palette::Toggle", // M-x / execute-extended-command

      // ========== FILE OPERATIONS (space f) ==========
      "space f f": "file_finder::Toggle", // find-file
      "space f j": "project_panel::ToggleFocus", // dired-jump
      "space f e d": "zed::OpenSettings", // edit doom config
      "space f e shift-k": "zed::OpenKeymap", // edit keymap
      "space f e n": "workspace::Open", // edit nix config (open workspace)

      // ========== BUFFER OPERATIONS (space b) ==========
      "space b s": "workspace::NewCenterTerminal", // scratch buffer (terminal as scratch)
      "space b f": "workspace::RevealInFinder", // reveal in finder
      "space b m": "notifications::ToggleNotifications", // toggle popup/messages

      // ========== GIT OPERATIONS (space g) ==========
      "space g s": "git_panel::ToggleFocus", // magit-status
      "space g t": "editor::OpenExcerpts", // git-timemachine (excerpts as similar)
      "space g g": "editor::ToggleGitBlame", // git-gutter (closest match)
      "space k g g": "editor::CopyPermalinkToLine", // git-link
      "space k g c": "editor::CopyPermalinkToLine", // git-link-commit

      // ========== SEARCH OPERATIONS (space s) ==========
      "space s f": "project_search::ToggleFocus", // search-other-directory
      "space s p": "project_search::ToggleFocus", // search-project

      // ========== TOGGLE/OPTIONS (space t) ==========
      "space t l": "editor::ToggleLineNumbers", // toggle line numbers

      // ========== OPEN/LAUNCH (space o) ==========
      "space o t": "terminal_panel::ToggleFocus", // toggle terminal

      // ========== HELP (space h) ==========
      "space h k": "dev::OpenKeyContextView", // describe-key

      // ========== WORKSPACE/WINDOW (space w) ==========
      "space w d": "pane::CloseActiveItem", // delete-window
      "space w s": "pane::SplitDown", // split-window-below
      "space w v": "pane::SplitRight", // split-window-right

      // ========== COMPILE/RUN (space c) ==========
      "space c c": "task::Spawn", // compile

      // ========== EDIT OPERATIONS (space e) ==========
      "space e r": "editor::Revert", // reload

      // ========== JUMP (space j) ==========
      "space j =": "editor::Format", // indent-region-or-buffer

      // ========== MISC/RESUME (space r) ==========
      "space r l": "pane::ActivatePrevItem", // resume/last

      // ========================================================================
      // VIM S-PREFIX MAP (like yq-s-map in Emacs)
      // ========================================================================
      // Disable default vim substitute
      "s": null,

      // File/Project operations
      "s h": "workspace::Save", // save-buffer
      "s m": "file_finder::Toggle", // projectile-find-file
      "s j": "recent_projects::OpenRecent", // projectile-recentf / recentf
      "s p": "projects::OpenRecent", // projectile-switch-project
      "s o": "project_panel::ToggleFocus", // dired-jump

      // Buffer operations
      "s k": "pane::CloseActiveItem", // bury-buffer
      "s c": "pane::CloseAllItems", // delete-window
      "s b": "tab_switcher::Toggle", // switch-to-buffer

      // Search operations
      "s f": "pane::DeploySearch", // search-project
      "s shift-f": "project_search::SearchInNew", // search-project-for-symbol-at-point
      "s /": "file_finder::Toggle", // consult-fd-or-find

      // Navigation
      "s n": "vim::MoveToNext", // avy-goto-char-timer
      "s l": "outline::Toggle", // imenu

      // Other
      "s v": "editor::SelectLargerSyntaxNode", // expand-region
      "s d": "editor::Delete", // sp-kill-sexp
      "s y": "projects::OpenRecent", // consult-dir
      "s shift-k": "project::CloseAll", // project-kill-buffers

      // ========================================================================
      // VIM NAVIGATION & EDITING
      // ========================================================================
      // Visual line movement (already default in Zed vim)
      "j": "vim::Down",
      "k": "vim::Up",
      "g j": "vim::Down",
      "g k": "vim::Up",

      // Line operations
      "g y": "editor::DuplicateLineDown", // duplicate-line
      "g shift-y": "editor::DuplicateLineDown", // copy-and-comment (closest match)

      // Folding
      "z l": "editor::Fold", // fold-level
      "ctrl-k": "editor::Fold", // toggle-fold (conflicts with menu, keeping menu)

      // Indentation
      ">": "editor::Indent",
      "<": "editor::Outdent",

      // Search
      "g n": "vim::MoveToNextWordStart", // evil-search-word-forward

      // Text objects (r prefix in Emacs for thing-edit)
      // Note: Zed doesn't have direct equivalent, using closest matches

      // ========================================================================
      // WINDOW MOVEMENT (C-M-s-7 / windmove in Emacs)
      // ========================================================================
      "ctrl-cmd-alt-7 h": "vim::WindowLeft",
      "ctrl-cmd-alt-7 j": "vim::WindowDown",
      "ctrl-cmd-alt-7 k": "vim::WindowUp",
      "ctrl-cmd-alt-7 l": "vim::WindowRight",

      // ========================================================================
      // BUFFER CYCLING (C-M-s-j/k in Emacs)
      // ========================================================================
      "ctrl-cmd-alt-j": "pane::ActivateNextItem",
      "ctrl-cmd-alt-k": "pane::ActivatePrevItem"
    }
  },

  // ============================================================================
  // VIM VISUAL MODE
  // ============================================================================
  {
    "context": "vim_mode == visual",
    "bindings": {
      // Surround in visual mode
      "s": ["vim::PushAddSurrounds", {}],

      // Indent and reselect (from Emacs evil-shift with gv)
      ">": "editor::Indent",
      "<": "editor::Outdent",

      // Expand region
      "v": "editor::SelectLargerSyntaxNode", // evil-multiedit-match-all
      "shift-v": "editor::SelectSmallerSyntaxNode" // expand-region contract
    }
  },

  // ============================================================================
  // VIM INSERT MODE
  // ============================================================================
  {
    "context": "vim_mode == insert && Editor",
    "bindings": {
      // Line movement in insert mode
      "ctrl-a": "editor::MoveToBeginningOfLine",
      "ctrl-e": "editor::MoveToEndOfLine",

      // Paste in insert mode
      "ctrl-y": "editor::Paste",

      // Completion (from Emacs ,)
      "comma": "editor::ShowCompletions", // trigger completion on comma

      // Hippie expand / autocomplete
      "ctrl-l": "editor::ShowCompletions" // hippie-expand
    }
  },

  // ============================================================================
  // GIT PANEL
  // ============================================================================
  {
    "context": "GitPanel && !Editor",
    "bindings": {
      "q": "git_panel::Close",
      "g r": "git_panel::Refresh"
    }
  },

  // ============================================================================
  // GIT DIFF (Editor context)
  // ============================================================================
  {
    "context": "GitDiff > Editor && vim_mode == normal",
    "bindings": {
      "x": "git::Restore",
      "u": "git::UnstageAndNext",
      "shift-u": "git::UnstageFile",
      "s": "git::StageAndNext",
      "shift-s": "git::StageFile",
      "ctrl-j": "editor::GoToHunk",
      "ctrl-k": "editor::GoToPreviousHunk"
    }
  },

  // ============================================================================
  // PROJECT PANEL
  // ============================================================================
  {
    "context": "ProjectPanel",
    "bindings": {
      "l": "project_panel::Open", // dired-find-file
      "h": "project_panel::CollapseSelectedEntry", // dired-up-directory
      "q": "project_panel::ToggleFocus"
    }
  },

  // ============================================================================
  // TERMINAL
  // ============================================================================
  {
    "context": "Terminal",
    "bindings": {
      "ctrl-y": "editor::Paste", // vterm-yank
      "ctrl-a": "terminal::SendText", // vterm-send-C-a
      "ctrl-e": "terminal::SendText" // vterm-send-C-e
    }
  },

  // ============================================================================
  // COMPLETIONS/CODE ACTIONS
  // ============================================================================
  {
    "context": "Editor && (showing_code_actions || showing_completions)",
    "use_key_equivalents": true,
    "bindings": {
      "ctrl-k": "editor::ContextMenuPrevious",
      "ctrl-j": "editor::ContextMenuNext",
      "ctrl-l": "editor::ConfirmCompletion", // complete-selection
      "escape": "editor::Cancel" // company-abort
    }
  },

  // ============================================================================
  // OUTLINE/SYMBOLS
  // ============================================================================
  {
    "context": "OutlinePanel",
    "bindings": {
      "q": "outline::ToggleFocus",
      "l": "outline::Open"
    }
  }
]
